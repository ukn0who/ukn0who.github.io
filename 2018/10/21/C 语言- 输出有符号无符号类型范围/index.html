<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
        <title>C 语言- 输出有符号, 无符号类型范围 | P1ayground</title>
        
        <link rel="alternate" href="/atom.xml" title="P1ayground" type="application/atom+xml">
        
        
        <link rel="icon" href="//favicon.png">
        
        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/common.css">
        <link rel="stylesheet" href="/css/markdown.css">
    </head>
    <body onscroll="scrollYListener()">
        <div class="wrapper">
            <div class="mobile_menu_btn">
  <button id="mobile_menu_btn" class="c-hamburger c-hamburger--htx">
  <span>toggle menu</span>
  </button>
</div>
<div class="slide_menu">
  <nav class="nav_scroll">
    <ul class="clearfix">
      
      
      <li class=""> <a href="/">Home</a> </li>
      
      
      <li class="active dotted"> <a href="/archives">Archive</a> </li>
      
    </ul>
  </nav>
  <div class="social">
    <ul class="clearfix">
      
      
      <li> <a href="http://github.com/cheng-kang" target="_blank"> <img src="/img/GitHub.png"> </a> </li>
      
      
      
      <li> <a href="http://www.weibo.com/progrant" target="_blank"> <img src="/img/Weibo.png"> </a> </li>
      
      
      
      <li> <a href="https://twitter.com/ScotlAnt" target="_blank"> <img src="/img/Twitter.png"> </a> </li>
      
      
      
      
    </ul>
  </div>
  <div class="copyright">
    &copy; 2018 P1ayground | Provided By  <a title="Uknowho" href="http://chengkang.me/" target="_blank">Uknowho</a>
  </div>
</div>
<header>
  <div class="mobile_navbar clearfix">
    
    <div class="logo">
      <a href="/">P1ayground</a>
    </div>
    
  </div>
  <div class="row clearfix no_form">
    <div class="logo">
      <a href="/">P1ayground</a>
    </div>
    <nav class="nav_scroll">
      <ul class="clearfix">
      
      
      <li class=""> <a href="/">Home</a> </li>
      
      
      <li class="active dotted"> <a href="/archives">Archive</a> </li>
      
      </ul>
    </nav>
  </div>
</header>
            <div class="section" id="Search">
	<div class="section_content">
		<h3>
		Search
		<br>
		Find out if your question is answered here
		</h3>
		<div id="search-content" class="search-content-modal unexpanded">
			<div id="search-view">
				<div class="search-info box">
					<input type="text" id="search-input" placeholder="Enter Keyword" >
					<div class="magnifying-glass" id="search-button" >
						<svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 500 500">
						<path fill="none" stroke="#fff" stroke-width="36" stroke-linecap="round" d="m280,278a153,153 0 1,0-2,2l170,170m-91-117 110,110-26,26-110-110"></path>
					</svg>
				</div>
			</div>
			<div class="modal" id="search-result" style="display:none">
				<h2 id="search-result-title">Found 0 match(es):</h2>
				<ul id="search-result-list">
				</ul>
				<span>
					<button onclick="dismissSearchResultModal()">×</button>
				</span>
			</div>
		</div>
	</div>
</div>

<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/search.js"></script>
<script type="text/javascript">
var path = "/search.xml";
searchFunc(path, 'search-input', 'search-result-list');
</script>

<script>
function dismissSearchResultModal() {
	document.getElementById("search-result").style.display = "none";
}
</script>
</div>
<div class="section" id="Post">
	<div class="section_content">
		<p class="breadcrumb"><a href="/">Q&amp;A</a> / C 语言- 输出有符号, 无符号类型范围</p>
		<div class="page_content mdcss">
			<h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述:"></a>问题描述:</h3><p>在&lt;C语言程序设计&gt;中, 其中一个问题是: 编写一个程序分别确定有符号 (signed) 和无符号 (unsighed) 限定的 <code>char</code> <code>int</code> <code>short</code> <code>long</code> 类型的取值范围.</p>
<p>一种方式就是直接输出定义在 <code>limits.h</code> 头文件中的各种类型宏.例如</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* signed */</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"signed char min = %d\n"</span>, SCHAR_MIN);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"signed char max = %d\n"</span>, SCHAR_MAX);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* unsigned */</span></span><br><span class="line"><span class="built_in">printf</span> (<span class="string">"unsigned char max = %d\n, UCHAR_MAX"</span>); <span class="comment">//无符号类型的值最小值都是 0</span></span><br></pre></td></tr></table></figure>
<p>另一种方式是直接计算, 不使用定义好的头文件.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* signed */</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"signed char min = %d\n"</span>, ~(<span class="keyword">char</span>)(<span class="keyword">unsigned</span> <span class="keyword">char</span>) ~<span class="number">0</span> &gt;&gt; <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"signed char max = %d\n"</span>,  (<span class="keyword">char</span>)(<span class="keyword">unsigned</span> <span class="keyword">char</span>) ~<span class="number">0</span> &gt;&gt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* unsigned */</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"unsigned char max = %u"</span>, (<span class="keyword">unsigned</span> <span class="keyword">char</span>) ~<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>对于有符号类型范围计算的解释是;</p>
<ol>
<li><p>先将 <code>0</code> 的各个位<strong>取反</strong>.即 [0….00] 变为 [1…11].</p>
<p>~0</p>
</li>
<li><p>强制类型转换为 unsigned char.</p>
<p>(unsigned char) ~0</p>
</li>
<li><p>右移 1 个单位, 用来去除符号位. </p>
<p>(unsigned char) ~0 &gt;&gt; 1</p>
<blockquote>
<p>右移之后, 最高位会用 0 填充. 在 signed 类型的解释中, 最高为位(符号位)为 0 , 解释为正数.</p>
</blockquote>
</li>
<li><p>最后转为 char 类型 (signed). 即为有符号 char 的最大值</p>
<p>(char)(unsigned char) ~0 &gt;&gt; 1</p>
</li>
</ol>
<hr>
<h3 id="思路总结"><a href="#思路总结" class="headerlink" title="思路总结"></a>思路总结</h3><p>大家都知道在计算机中是以 <strong>二进制</strong> 方式存储信息.</p>
<p>对于非负数, 即<code>unsigned</code>类型, 其最小值  $ U_{min}$ 等于所有位取值为 $0$ 时. 即 $U_{min} = 0$. 其最大值 $U_{max}$ 等于所有位取值为 $1$ 时, 即 $U_{max} = 2^w$, $w$ 代表类型所占的位数(bits).</p>
<p>而对于负数, 由于<strong>最高位用作符号位</strong> 所以用来表示数的范围的位数比总位数少 $1$ . 即对于 8 位类型的有符号(signed) 数, 真正表示数值的 只有 7 位. 所以对于负数的最大值是$S_{max} = 2^{8-1} = 127$ , 所以当符号位为 0, 其余数值各位取 1 , 即位表示为[01….1]时, 有符号类型有最大值. <strong>最小值等于对最大值取反</strong>,即 $S_{min} =$ ~ $S_{max}$ </p>
<h3 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h3><p>为什么对于有符号数来说, 最大值取反就是最小值呢? 请看这里的解释:</p>

		</div>
	</div>

	

	
	
</div>

	
	
	
	<div class="section" id="Pagenation">
		
		
		<a href="/2018/10/17/C语言 - 枚举类型/">Next</a>
		
	</div>
	

            <footer>
	<div class="footer_wrap">
		<div class="social">
			<ul class="clearfix">
				
				
				<li> <a href="http://github.com/cheng-kang" target="_blank"> <img src="/img/GitHub.png"> </a> </li>
				
				
				
				<li> <a href="http://www.weibo.com/progrant" target="_blank"> <img src="/img/Weibo.png"> </a> </li>
				
				
				
				<li> <a href="https://twitter.com/ScotlAnt" target="_blank"> <img src="/img/Twitter.png"> </a> </li>
				
				
				
				
			</ul>
		</div>
		<img src="/img/line.jpg">
		<div class="copyright">
			&copy; 2018 P1ayground | Provided By  <a title="Uknowho" href="http://chengkang.me/" target="_blank">Uknowho</a>
		</div>
	</div>
</footer>
        </div>
        <script type="text/javascript">
        function scrollYListener() {
        var searchHeight = parseInt(getComputedStyle(document.getElementById("Search")).height)
        var width = document.documentElement.clientWidth;
        var supportPageOffset = window.pageXOffset !== undefined;
        var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");
        var scrollY = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;
        if (scrollY >= searchHeight-10) {
        document.getElementsByTagName('header')[0].style.backgroundColor = "#cd4b4b";
        document.getElementsByClassName('logo')[0].style.backgroundColor = "#cd4b4b";
        } else {
        document.getElementsByTagName('header')[0].style.backgroundColor = "#4f8e8e";
        document.getElementsByClassName('logo')[0].style.backgroundColor = "#4f8e8e";
        }
        }
        var isMenuExpanded = false;
        document.getElementById("mobile_menu_btn").onclick = function toggleMobileMenu() {
        if (isMenuExpanded) {
        document.getElementsByClassName('slide_menu')[0].className = "slide_menu";
        } else {
        document.getElementsByClassName('slide_menu')[0].className += " mobile_menu_active";
        }
        isMenuExpanded = !isMenuExpanded;
        }
        </script>
        
        
    </body>
</html>